<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Matleken UF</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="index.css">
    <style>
       @media (min-width: 769px) {
            .header-container {
                display: flex;
                align-items: center;
                justify-content: space-between;
                padding: 0 20px;
            }

            #logo {
                order: -1;
            }

            .nav-menu {
                justify-content: center;
                flex: 1;
            }

            .cart-icon {
                margin-left: auto;
            }

            .product-section .container {
                display: flex;
                flex-wrap: wrap;
                justify-content: space-between;
                gap: 20px;
            }
        }

        @media (max-width: 768px) {
            .header-container {
                display: flex;
                align-items: center;
                justify-content: space-between;
                padding: 0 10px;
            }

            #logo {
                order: 1;
                margin: 0 auto;
                max-width: 100px;
            }

            .menu-toggle {
                display: block;
            }

            .nav-menu {
                display: none;
            }

            .nav-menu-mobile.active {
                display: flex;
            }

            .cart-icon {
                order: 2;
            }

            .product-section .container {
                display: block;
            }
        }


    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="header-container">
            <button class="menu-toggle" id="menuToggle">
                <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 6H6m12 4H6m12 4H6m12 4H6"/>
                </svg>
            </button>
            <img src="bilder/kortlek orange.JPG" alt="Matleken UF Logotyp" id="logo">
            <nav>
                <ul class="nav-menu">
                    <li><a href="#aboutSection">Om Oss</a></li>
                    <li><a href="#productSection">Våran produkt</a></li>
                    <li><a href="#contactSection">Kontakt</a></li>
                </ul>
                <ul class="nav-menu-mobile" id="navMenuMobile">
                    <li><a href="#aboutSection">Om Oss</a></li>
                    <li><a href="#productSection">Våran produkt</a></li>
                    <li><a href="#contactSection">Kontakt</a></li>
                </ul>
            </nav>
            <div class="cart-icon" id="cartIcon">
                <svg class="w-[48px] h-[48px] text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.4" d="M5 4h1.5L9 16m0 0h8m-8 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4Zm8 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4Zm-8.5-3h9.25L19 7H7.312"/>
                </svg>
                <span id="cartCount" style="margin-left: 8px; font-weight: bold;">0</span>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-content">
            <h2>Matleken</h2>
            <p>Upptäck fantastiska recept.</p>
            <a href="#searchSection" class="cta-button">Sök nu</a>
        </div>
    </section>    

    <!-- Om Oss Sektion -->
    <section id="aboutSection" class="about-section">
        <div class="container">
            <h2>Om Oss</h2>
            <p>Matleken UF är ett företag som brinner för att göra matlagning roligare och enklare för alla. Vi erbjuder produkter och tjänster som hjälper dig att upptäcka nya recept och inspirera till mer kreativitet i köket.</p>
        </div>
    </section>   
    <!-- Search Section -->
    <section id="searchSection" class="search-section">
        <div class="container">
            <input type="text" id="searchInput" placeholder="Ange 5-siffrig kod för recept...">
            <button id="searchButton">Sök</button>
        </div>
    </section>

    <!-- Produkter Sektion -->
    <section id="productSection" class="product-section">
        <div class="container">
            <div class="product-card">
                <img src="bilder/Vegatarinsk.png" alt="Produkt 1">
                <h3>Vegatarinsk</h3>
                <p>Perfekt för matälskare och familjer.</p>
                <div class="price">150 kr</div>
                <button class="add-to-cart-button" data-product="Vegatarinsk" data-image="bilder/Vegatarinsk.png">Lägg till i kundvagn</button>
            </div>
            <div class="product-card">
                <img src="bilder/blå.png" alt="Produkt 2">
                <h3>Asiatiskt</h3>
                <p>Perfekt för matälskare och familjer.</p>
                <div class="price">150 kr</div>
                <button class="add-to-cart-button" data-product="Asiatiskt" data-image="bilder/blå.png">Lägg till i kundvagn</button>
            </div>
        </div>
    </section>

    <!-- Kontakt Sektion -->
    <section id="contactSection" class="contact-section">
        <div class="container">
            <h2>Kontakt</h2>
            <div class="contact-details">
                <p><strong>Telefon:</strong> +46 #</p>
                <p><strong>E-post:</strong> ufmatleken@gmail.com</p>
                <p><strong>Adress:</strong> Matleken, Gamla Norrvägen 6, 352 43 Växjö</p>
            </div>
        </div>
    </section>
 
<!-- Modal for the Form -->
<div class="modal" id="cartModal">
    <div class="modal-content">
        <h2>Förbeställ Matleken UF</h2>
        <div id="productDetails" class="product-details"></div>
        <p>Fyll i dina uppgifter för att förbeställa spelet.</p>
        <form id="orderForm">
            <input type="text" id="name" placeholder="Namn" required>
            <input type="tel" id="phone" placeholder="Telefonnummer" required>
            <input type="email" id="email" placeholder="E-postadress" required>
            <textarea id="comment" placeholder="Eventuell kommentar..."></textarea>
            <button type="submit">Förbeställ</button>
        </form>
    </div>
</div>

<!-- Resultatsektion (där receptkort visas) -->
<section id="recipeSection" class="recipe-section">
    <div id="resultSection"></div>
</section>

<script>
    // Hantera hamburgarmenyn
    document.getElementById('menuToggle').addEventListener('click', function () {
        const navMenuMobile = document.getElementById('navMenuMobile');
        navMenuMobile.classList.toggle('active');
    });

    // Kundvagnsdata
    let cart = {};
    const cartCountElement = document.getElementById('cartCount');
    const addToCartButtons = document.querySelectorAll('.add-to-cart-button');
    const productDetails = document.getElementById('productDetails');

    addToCartButtons.forEach(button => {
        button.addEventListener('click', () => {
            const product = button.getAttribute('data-product');
            const image = button.getAttribute('data-image');

            if (!cart[product]) {
                cart[product] = { quantity: 0, image };
            }

            cart[product].quantity++;

            const totalItems = Object.values(cart).reduce((sum, item) => sum + item.quantity, 0);
            cartCountElement.textContent = totalItems;
        });
    });

    // Hantera visning av modalen
    const cartIcon = document.getElementById('cartIcon');
    const cartModal = document.getElementById('cartModal');

    cartIcon.addEventListener('click', () => {
        productDetails.innerHTML = '';
        for (const [product, details] of Object.entries(cart)) {
            productDetails.innerHTML += `
                <div>
                    <img src="${details.image}" alt="${product}" class="product-image">
                    <p>${product}: ${details.quantity} st <span class="remove-button" data-product="${product}">Ta bort</span></p>
                </div>`;
        }
        cartModal.classList.add('active');
        handleRemoveButtons();
    });

    // Hantera ta bort-knappar i kundvagnen
    function handleRemoveButtons() {
        document.querySelectorAll('.remove-button').forEach(button => {
            button.addEventListener('click', (e) => {
                const productToRemove = e.target.getAttribute('data-product');
                delete cart[productToRemove];

                const totalItems = Object.values(cart).reduce((sum, item) => sum + item.quantity, 0);
                cartCountElement.textContent = totalItems;
                e.target.parentElement.parentElement.remove();

                if (Object.keys(cart).length === 0) {
                    cartModal.classList.remove('active');
                }
            });
        });
    }

    // Stäng modal vid klick utanför innehållet
    cartModal.addEventListener('click', (e) => {
        if (e.target === cartModal) {
            cartModal.classList.remove('active');
        }
    });

    // Hantera formulärets inskickning
    const orderForm = document.getElementById('orderForm');
    orderForm.addEventListener('submit', async (e) => {
        e.preventDefault();

        // Validering
        const name = document.getElementById('name').value.trim();
        const phone = document.getElementById('phone').value.trim();
        const email = document.getElementById('email').value.trim();
        const comment = document.getElementById('comment').value.trim();

        if (!name || !phone || !email) {
            alert('Vänligen fyll i alla obligatoriska fält.');
            return;
        }

        const formData = { name, phone, email, comment };

        try {
            const response = await fetch('https://script.google.com/macros/s/AKfycbyghufVsZUZPwnaWDCkN0aS3tRzwtP2JGS1Eatmudv0T7qnrPPAypLekcBWbduthFyA2w/exec', {
                method: 'POST',
                body: JSON.stringify(formData),
                headers: { 'Content-Type': 'application/json' },
            });

            const result = await response.json();
            if (result.result === 'success') {
                alert('Tack för din förbeställning!');
                cartModal.classList.remove('active');
                cart = {}; // Rensa kundvagnen
                cartCountElement.textContent = "0"; // Återställ räknaren
                window.location.href = "index.html"; // Navigera tillbaka till framsidan
            } else {
                throw new Error(result.error || 'Okänt fel');
            }
        } catch (error) {
            alert('Något gick fel. Kontrollera din anslutning eller försök igen senare.');
            console.error('Fel:', error);
        }
    });
</script>
<script src="app.js"></script>
</body>
</html>








    